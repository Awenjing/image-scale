/*! image-scale v1.2.0 | Â©2012-2013 Nicolas BADIA | Licensed under the MIT license */
!function(e){e.fn.imageScale=function(d){return this.each(function(){var l=e(this),b=l.data("imageScale");if(b)b.scale();else{l.css("opacity",0);var f=l[0].complete,g=e.extend({},e.fn.imageScale.defaults,"object"==typeof d&&d),a=function(){l.data("imageScale",b=new h(this,g));g.rescaleOnResize&&(window.requestAnimationFrame||e(window).resize(function(a){b.scale()}));b.scale(!0)};f?a.apply(l[0]):l.load(a)}})};e.fn.imageScale.defaults={scale:"best-fill",align:"center",parent:null,hideParentOverflow:!0,
fadeInDuration:0,rescaleOnResize:!0,debug:0};var h=function(d,l){this.options=l;var b=this.$element=e(d);this.elementWidth=b.attr("width")||d.width;this.elementHeight=b.attr("height")||d.height;this.$parent=l.parent?l.parent:e(e(d).parent()[0])};e.fn.imageScale.Constructor=h;h.prototype={NONE:"none",FILL:"fill",BEST_FILL:"best-fill",BEST_FIT:"best-fit",BEST_FIT_DOWN_ONLY:"best-fit-down",ALIGN_LEFT:"left",ALIGN_RIGHT:"right",ALIGN_CENTER:"center",ALIGN_TOP:"top",ALIGN_BOTTOM:"bottom",ALIGN_TOP_LEFT:"top-left",
ALIGN_TOP_RIGHT:"top-right",ALIGN_BOTTOM_LEFT:"bottom-left",ALIGN_BOTTOM_RIGHT:"bottom-right",constructor:h,scale:function(d){if(window.requestAnimationFrame){var l=this;requestAnimationFrame(function(){l.scale()})}if(this.needUpdate()){var b=this.options,f=this.$element,g=this.$parent,a=g.outerWidth(),k=g.outerHeight(),e=g.innerWidth(),c=g.innerHeight(),e=a-e,c=k-c;scaleData=f.attr("data-scale");alignData=f.attr("data-align");scale=scaleData?scaleData:b.scale;align=alignData?alignData:b.align;if(scale){this._cacheDestWidth===
a&&this._cacheDestHeight===k&&2<b.debug&&console.log("imageScale - DEBUG NOTICE: The parent size hasn't changed.",a,k);var h=this.elementWidth,m=this.elementHeight;a&&k&&h&&m?(this._cacheDestWidth=a,this._cacheDestHeight=k,a=this.innerFrameForSize(scale,align,h,m,a,k),e&&(a.x-=e/2),c&&(a.y-=c/2),f.css({position:"absolute",top:a.y+"px",left:a.x+"px",width:a.width+"px",height:a.height+"px","max-width":"none"}),d&&(f.css({display:"none",opacity:1}),f.fadeIn(b.fadeInDuration)),b.hideParentOverflow&&g.css({overflow:"hidden"})):
0<b.debug&&console.error("imageScale - DEBUG ERROR: The dimensions are incorrect.",h,m,a,k)}else 2<b.debug&&console.log("imageScale - DEBUG NOTICE: The scale property is null.")}},innerFrameForSize:function(d,e,b,f,g,a){var k,h,c;c={x:0,y:0,width:g,height:a};if(d===this.FILL)return c;k=g/b;h=a/f;switch(d){case this.BEST_FILL:d=k>h?k:h;break;case this.BEST_FIT:d=k<h?k:h;break;case this.NONE:d=1;break;default:d!==this.BEST_FIT_DOWN_ONLY&&1<this.options.debug&&console.warn("imageScale - DEBUG WARNING: The scale '"+
d+"' was not understood."),d=b>g||f>a?k<h?k:h:1}b*=d;f*=d;c.width=Math.round(b);c.height=Math.round(f);switch(e){case this.ALIGN_LEFT:c.x=0;c.y=a/2-f/2;break;case this.ALIGN_RIGHT:c.x=g-b;c.y=a/2-f/2;break;case this.ALIGN_TOP:c.x=g/2-b/2;c.y=0;break;case this.ALIGN_BOTTOM:c.x=g/2-b/2;c.y=a-f;break;case this.ALIGN_TOP_LEFT:c.x=0;c.y=0;break;case this.ALIGN_TOP_RIGHT:c.x=g-b;c.y=0;break;case this.ALIGN_BOTTOM_LEFT:c.x=0;c.y=a-f;break;case this.ALIGN_BOTTOM_RIGHT:c.x=g-b;c.y=a-f;break;default:e!==this.ALIGN_CENTER&&
1<this.options.debug&&console.warn("imageScale - DEBUG WARNING: The align '"+e+"' was not understood."),c.x=g/2-b/2,c.y=a/2-f/2}return c},needUpdate:function(){var d=e(window).height()+" "+e(window).width();return this.lastWindowSize!==d?(this.lastWindowSize=d,!0):!1},lastWindowSize:null}}(window.jQuery);