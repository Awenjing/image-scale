/*! image-scale v1.2.1 | Â©2012-2013 Nicolas BADIA | Licensed under the MIT license */
!function(e){e.fn.imageScale=function(d){return this.each(function(){var l=e(this),c=l.data("imageScale");if(c)c.scale();else{l.css("opacity",0);var f=l[0].complete,g=e.extend({},e.fn.imageScale.defaults,"object"==typeof d&&d),a=function(){l.data("imageScale",c=new h(this,g));g.rescaleOnResize&&(window.requestAnimationFrame||e(window).resize(function(a){c.scale()}));c.scale(!0)};f?a.apply(l[0]):l.load(a)}})};e.fn.imageScale.defaults={scale:"best-fill",align:"center",parent:null,hideParentOverflow:!0,
fadeInDuration:0,rescaleOnResize:!0,debug:0};var h=function(d,l){this.options=l;var c=this.$element=e(d);this.elementWidth=c.attr("width")||d.width;this.elementHeight=c.attr("height")||d.height;this.$parent=l.parent?l.parent:e(e(d).parent()[0])};e.fn.imageScale.Constructor=h;h.prototype={NONE:"none",FILL:"fill",BEST_FILL:"best-fill",BEST_FIT:"best-fit",BEST_FIT_DOWN_ONLY:"best-fit-down",ALIGN_LEFT:"left",ALIGN_RIGHT:"right",ALIGN_CENTER:"center",ALIGN_TOP:"top",ALIGN_BOTTOM:"bottom",ALIGN_TOP_LEFT:"top-left",
ALIGN_TOP_RIGHT:"top-right",ALIGN_BOTTOM_LEFT:"bottom-left",ALIGN_BOTTOM_RIGHT:"bottom-right",constructor:h,scale:function(d){var l=this,c=this.$element;window.requestAnimationFrame&&requestAnimationFrame(function(){l.scale()});if(d||this.needUpdate()&&c.is(":visible")){var f=this.options,g=this.$parent,a=g.outerWidth(),k=g.outerHeight(),e=g.innerWidth(),b=g.innerHeight(),e=a-e,b=k-b;scaleData=c.attr("data-scale");alignData=c.attr("data-align");scale=scaleData?scaleData:f.scale;align=alignData?alignData:
f.align;if(scale){this._cacheDestWidth===a&&this._cacheDestHeight===k&&2<f.debug&&console.log("imageScale - DEBUG NOTICE: The parent size hasn't changed: dest width: '"+a+"' - dest height: '"+k+"'.");var h=this.elementWidth,m=this.elementHeight;a&&k&&h&&m?(this._cacheDestWidth=a,this._cacheDestHeight=k,a=this.innerFrameForSize(scale,align,h,m,a,k),e&&(a.x-=e/2),b&&(a.y-=b/2),c.css({position:"absolute",top:a.y+"px",left:a.x+"px",width:a.width+"px",height:a.height+"px","max-width":"none"}),d&&(f.hideParentOverflow&&
g.css({overflow:"hidden"}),c.css({display:"none",opacity:1}),c.fadeIn(f.fadeInDuration))):console.error("imageScale - DEBUG ERROR: The dimensions are incorrect: source width: '"+h+"' - source height: '"+m+"' - dest width: '"+a+"' - dest height: '"+k+"'.")}else 2<f.debug&&console.log("imageScale - DEBUG NOTICE: The scale property is null.")}},innerFrameForSize:function(d,e,c,f,g,a){var k,h,b;b={x:0,y:0,width:g,height:a};if(d===this.FILL)return b;k=g/c;h=a/f;switch(d){case this.BEST_FILL:d=k>h?k:h;
break;case this.BEST_FIT:d=k<h?k:h;break;case this.NONE:d=1;break;default:d!==this.BEST_FIT_DOWN_ONLY&&1<this.options.debug&&console.warn("imageScale - DEBUG WARNING: The scale '"+d+"' was not understood."),d=c>g||f>a?k<h?k:h:1}c*=d;f*=d;b.width=Math.round(c);b.height=Math.round(f);switch(e){case this.ALIGN_LEFT:b.x=0;b.y=a/2-f/2;break;case this.ALIGN_RIGHT:b.x=g-c;b.y=a/2-f/2;break;case this.ALIGN_TOP:b.x=g/2-c/2;b.y=0;break;case this.ALIGN_BOTTOM:b.x=g/2-c/2;b.y=a-f;break;case this.ALIGN_TOP_LEFT:b.x=
0;b.y=0;break;case this.ALIGN_TOP_RIGHT:b.x=g-c;b.y=0;break;case this.ALIGN_BOTTOM_LEFT:b.x=0;b.y=a-f;break;case this.ALIGN_BOTTOM_RIGHT:b.x=g-c;b.y=a-f;break;default:e!==this.ALIGN_CENTER&&1<this.options.debug&&console.warn("imageScale - DEBUG WARNING: The align '"+e+"' was not understood."),b.x=g/2-c/2,b.y=a/2-f/2}return b},needUpdate:function(){var d=e(window).height()+" "+e(window).width();return this._lastWindowSize!==d?(this._lastWindowSize=d,!0):!1},_cacheDestWidth:null,_cacheDestHeight:null,
_lastWindowSize:null}}(window.jQuery);