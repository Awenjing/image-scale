/*! image-scale v1.0.0 | Â©2012-2013 Nicolas BADIA | Licensed under the MIT license */
!function(f){f.fn.imageScale=function(c){return this.each(function(){var l=f(this),d=l.data("imageScale");if(d)d.scale();else{var e=f.extend({},f.fn.imageScale.defaults,"object"==typeof c&&c),a=function(){l.data("imageScale",d=new m(this,e));e.updateOnResize&&(window.requestAnimationFrame||f(window).resize(function(a){d.scale()}));d.scale(!0)};l[0].complete?a.apply(l[0]):l.load(a)}})};f.fn.imageScale.defaults={updateOnResize:!0,hideOverflow:!0,container:null,debug:0};var m=function(c,l){this.options=
l;var d=this.$element=f(c);this.elementWidth=d.attr("width")||c.width;this.elementHeight=d.attr("height")||c.height;this.$parent=l.container?l.container:f(f(c).parent()[0])};f.fn.imageScale.Constructor=m;m.prototype={NONE:"none",FILL:"fill",BEST_FILL:"best-fill",BEST_FIT:"best-fit",BEST_FIT_DOWN_ONLY:"best-fit-down",ALIGN_LEFT:"left",ALIGN_RIGHT:"right",ALIGN_CENTER:"center",ALIGN_TOP:"top",ALIGN_BOTTOM:"bottom",ALIGN_TOP_LEFT:"top-left",ALIGN_TOP_RIGHT:"top-right",ALIGN_BOTTOM_LEFT:"bottom-left",
ALIGN_BOTTOM_RIGHT:"bottom-right",constructor:m,scale:function(c){if(window.requestAnimationFrame){var l=this;requestAnimationFrame(function(){l.scale()})}if(this.needUpdate()){c=this.options;var d=this.$element,e=this.$parent,a=e.outerWidth(),g=e.outerHeight(),h=e.innerWidth(),k=e.innerHeight(),h=a-h,k=g-k;this._cacheDestWidth===a&&this._cacheDestHeight===g&&2<c.debug&&console.log("imageScale - DEBUG NOTICE: The container size didn't change.",a,g);var b=this.elementWidth,f=this.elementHeight;if(a&&
g&&b&&f){this._cacheDestWidth=a;this._cacheDestHeight=g;var m=d.attr("data-scale"),n=d.attr("data-align"),a=this.innerFrameForSize(m,n,b,f,a,g);h&&(a.x-=h/2);k&&(a.y-=k/2);d.css({position:"absolute",top:a.y+"px",left:a.x+"px",width:a.width+"px",height:a.height+"px","max-width":"none"});c.hideOverflow&&e.css({overflow:"hidden"})}else 0<c.debug&&console.error("imageScale - DEBUG ERROR: The dimensions are incorrect.",b,f,a,g)}},innerFrameForSize:function(c,f,d,e,a,g){var h,k,b;b={x:0,y:0,width:a,height:g};
if(c===this.FILL)return b;h=a/d;k=g/e;switch(c){case this.BEST_FILL:c=h>k?h:k;break;case this.BEST_FIT:c=h<k?h:k;break;case this.NONE:c=1;break;default:c!==this.BEST_FIT_DOWN_ONLY&&1<this.options.debug&&console.warn("imageScale - DEBUG WARNING: The scale '"+c+"' was not understood."),c=d>a||e>g?h<k?h:k:1}d*=c;e*=c;b.width=Math.round(d);b.height=Math.round(e);switch(f){case this.ALIGN_LEFT:b.x=0;b.y=g/2-e/2;break;case this.ALIGN_RIGHT:b.x=a-d;b.y=g/2-e/2;break;case this.ALIGN_TOP:b.x=a/2-d/2;b.y=0;
break;case this.ALIGN_BOTTOM:b.x=a/2-d/2;b.y=g-e;break;case this.ALIGN_TOP_LEFT:b.x=0;b.y=0;break;case this.ALIGN_TOP_RIGHT:b.x=a-d;b.y=0;break;case this.ALIGN_BOTTOM_LEFT:b.x=0;b.y=g-e;break;case this.ALIGN_BOTTOM_RIGHT:b.x=a-d;b.y=g-e;break;default:f!==this.ALIGN_CENTER&&1<this.options.debug&&console.warn("imageScale - DEBUG WARNING: The align '"+f+"' was not understood."),b.x=a/2-d/2,b.y=g/2-e/2}return b},needUpdate:function(){var c=f(window).width();return this.lastUpdateWidth!==c?(this.lastUpdateWidth=
c,!0):!1},lastUpdateWidth:null}}(window.jQuery);